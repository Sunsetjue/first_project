function Carousel_map(){}console.log("yyy"),Carousel_map.prototype.list_carousel=function(){var l=this;myajax.get({url:"/cms/carousel_detail/",success:function(a){if(200===a.code){var e=a.data;console.log(e);for(var o=0;o<e.length;o++){var t=e[o];tpl=template("carousel-list-group",{banner:t});var s=$(".carousel-group");s.append(tpl);var n=s.find(".carousel-list-group:last");l.add_input_files(n),l.close_carousel(n),l.add_save_btn(n)}}}})},Carousel_map.prototype.listen_add_carousel=function(){var o=this;$("#add_carousel_btn").click(function(){var a=$(".carousel-group");if(5<=a.children().length)window.messageBox.showInfo("最多只能添加五张轮播图！");else{tpl=template("carousel-list-group"),a.prepend(tpl);var e=a.find(".carousel-list-group:first");o.add_input_files(e),o.close_carousel(e),o.add_save_btn(e)}})},Carousel_map.prototype.add_input_files=function(a){var o=a.find(".add_input_file"),e=a.find(".add_file_input");o.click(function(){console.log("ttt"),e.click()}),e.change(function(){var a=this.files[0],e=new FormData;e.append("file",a),myajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(a){if(200===a.code){var e=a.data.url;o.attr("src",e)}}})})},Carousel_map.prototype.add_save_btn=function(t){var a=t.find(".save-btn"),s=t.find(".add_input_file"),n=t.find("input[name='position']"),l=t.find("input[name='link_to']"),i=t.find(".banner-id"),c=t.attr("data-carousel-id"),r="";r=c?"/cms/editor_carousel/":"/cms/carousel/",a.click(function(){var a=s.attr("src"),o=n.val(),e=l.val();myajax.post({url:r,data:{position:o,image_url:a,link_to:e,pk:c},success:function(a){if(200===a.code){if(c)window.messageBox.showSuccess("轮播图修改成功！");else{var e=a.data.id;t.attr("data-carousel-id",e),window.messageBox.showSuccess("轮播图新增成功！")}i.text("摆放位置"+o)}}})})},Carousel_map.prototype.close_carousel=function(e){e.find(".close-carousel-btn").click(function(){var a=e.attr("data-carousel-id");a?myalert.alertConfirm({text:"您确定要删除这个轮播图吗？",confirmCallback:function(){console.log("确认删除！"),myajax.post({url:"/cms/delete_carousel/",data:{carousel_id:a},success:function(a){200===a.code&&(e.remove(),window.messageBox.showSuccess("删除成功！"))}})}}):e.remove()})},Carousel_map.prototype.run=function(){this.listen_add_carousel(),this.list_carousel()},$(function(){(new Carousel_map).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcm91c2VsX21hcC5qcyJdLCJuYW1lcyI6WyJDYXJvdXNlbF9tYXAiLCJjb25zb2xlIiwibG9nIiwicHJvdG90eXBlIiwibGlzdF9jYXJvdXNlbCIsInNlbGYiLCJ0aGlzIiwibXlhamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwidHBsIiwidGVtcGxhdGUiLCJjYXJvdXNlbF9ncm91cCIsIiQiLCJhcHBlbmQiLCJjYXJvdXNlbF9maXJzdCIsImZpbmQiLCJhZGRfaW5wdXRfZmlsZXMiLCJjbG9zZV9jYXJvdXNlbCIsImFkZF9zYXZlX2J0biIsImxpc3Rlbl9hZGRfY2Fyb3VzZWwiLCJjbGljayIsImNoaWxkcmVuIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwicHJlcGVuZCIsImltYWdlIiwiaW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtX2RhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJzYXZlX2J0biIsImlucHV0X2ltYWdlIiwiaW5wdXRfcG9zaXRpb24iLCJpbnB1dF9saW5rX3RvIiwibnVtYmVyIiwiY2Fyb3VzZWxfaWQiLCJpbWFnZV91cmwiLCJwb3NpdGlvbiIsInZhbCIsImxpbmtfdG8iLCJwayIsInNob3dTdWNjZXNzIiwiaWQiLCJ0ZXh0IiwibXlhbGVydCIsImFsZXJ0Q29uZmlybSIsImNvbmZpcm1DYWxsYmFjayIsInJlbW92ZSIsInJ1biJdLCJtYXBwaW5ncyI6IkFBRUEsU0FBU0EsZ0JBRlRDLFFBQVFDLElBQUksT0FNWkYsYUFBYUcsVUFBVUMsY0FBZ0IsV0FDbkMsSUFBSUMsRUFBT0MsS0FDWEMsT0FBT0MsSUFBSSxDQUNQQyxJQUFPLHdCQUNQQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUMsRUFBVUQs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UUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE9BQ2JVLEVBQWV5QyxTQUNmakMsT0FBT0MsV0FBVzBCLFlBQVksZ0JBT2xEbkMsRUFBZXlDLFlBSzNCOUQsYUFBYUcsVUFBVTRELElBQU0sV0FDekJ6RCxLQUFLb0Isc0JBQ0xwQixLQUFLRixpQkFHVGUsRUFBRSxZQUNxQixJQUFJbkIsY0FDVitEIiwiZmlsZSI6ImNhcm91c2VsX21hcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZyhcInl5eVwiKTtcclxuXHJcbmZ1bmN0aW9uIENhcm91c2VsX21hcCgpIHtcclxuXHJcbn1cclxuXHJcbkNhcm91c2VsX21hcC5wcm90b3R5cGUubGlzdF9jYXJvdXNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9jYXJvdXNlbF9kZXRhaWwvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbXCJkYXRhXCJdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFubmVycyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8YmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHRwbCA9IHRlbXBsYXRlKFwiY2Fyb3VzZWwtbGlzdC1ncm91cFwiLCB7XCJiYW5uZXJcIjogYmFubmVyfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcm91c2VsX2dyb3VwID0gJChcIi5jYXJvdXNlbC1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbF9ncm91cC5hcHBlbmQodHBsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcm91c2VsX2ZpcnN0ID0gY2Fyb3VzZWxfZ3JvdXAuZmluZChcIi5jYXJvdXNlbC1saXN0LWdyb3VwOmxhc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRfaW5wdXRfZmlsZXMoY2Fyb3VzZWxfZmlyc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfY2Fyb3VzZWwoY2Fyb3VzZWxfZmlyc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkX3NhdmVfYnRuKGNhcm91c2VsX2ZpcnN0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbkNhcm91c2VsX21hcC5wcm90b3R5cGUubGlzdGVuX2FkZF9jYXJvdXNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhZGRfY2Fyb3VzZWxfYnRuID0gJChcIiNhZGRfY2Fyb3VzZWxfYnRuXCIpO1xyXG4gICAgYWRkX2Nhcm91c2VsX2J0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNhcm91c2VsX2dyb3VwID0gJChcIi5jYXJvdXNlbC1ncm91cFwiKTtcclxuICAgICAgICB2YXIgbnVtYmVycyA9IGNhcm91c2VsX2dyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChudW1iZXJzID49NSkge1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbyhcIuacgOWkmuWPquiDvea3u+WKoOS6lOW8oOi9ruaSreWbvu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cGwgPSB0ZW1wbGF0ZShcImNhcm91c2VsLWxpc3QtZ3JvdXBcIik7XHJcbiAgICAgICAgY2Fyb3VzZWxfZ3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIHZhciBjYXJvdXNlbF9maXJzdCA9IGNhcm91c2VsX2dyb3VwLmZpbmQoXCIuY2Fyb3VzZWwtbGlzdC1ncm91cDpmaXJzdFwiKTtcclxuICAgICAgICBzZWxmLmFkZF9pbnB1dF9maWxlcyhjYXJvdXNlbF9maXJzdCk7XHJcbiAgICAgICAgc2VsZi5jbG9zZV9jYXJvdXNlbChjYXJvdXNlbF9maXJzdCk7XHJcbiAgICAgICAgc2VsZi5hZGRfc2F2ZV9idG4oY2Fyb3VzZWxfZmlyc3QpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQ2Fyb3VzZWxfbWFwLnByb3RvdHlwZS5hZGRfaW5wdXRfZmlsZXMgPSBmdW5jdGlvbiAoY2Fyb3VzZWxfZmlyc3QpIHtcclxuICAgIHZhciBpbWFnZSA9IGNhcm91c2VsX2ZpcnN0LmZpbmQoXCIuYWRkX2lucHV0X2ZpbGVcIik7XHJcbiAgICB2YXIgaW5wdXQgPSBjYXJvdXNlbF9maXJzdC5maW5kKFwiLmFkZF9maWxlX2lucHV0XCIpOyAvLyDojrflvpfngrnlh7vlm77niYfnmoTlk6rkuKppbnB1dOagh+etvlxyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidHR0XCIpO1xyXG4gICAgICAgIGlucHV0LmNsaWNrKClcclxuICAgIH0pO1xyXG5cclxuICAgIGlucHV0LmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtX2RhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1fZGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0W1wiZGF0YVwiXVtcInVybFwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKFwic3JjXCIsdXJsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5DYXJvdXNlbF9tYXAucHJvdG90eXBlLmFkZF9zYXZlX2J0biA9IGZ1bmN0aW9uIChjYXJvdXNlbF9maXJzdCkge1xyXG4gICAgdmFyIHNhdmVfYnRuID0gY2Fyb3VzZWxfZmlyc3QuZmluZChcIi5zYXZlLWJ0blwiKTtcclxuICAgIHZhciBpbnB1dF9pbWFnZSA9IGNhcm91c2VsX2ZpcnN0LmZpbmQoXCIuYWRkX2lucHV0X2ZpbGVcIik7XHJcbiAgICB2YXIgaW5wdXRfcG9zaXRpb24gPSBjYXJvdXNlbF9maXJzdC5maW5kKFwiaW5wdXRbbmFtZT0ncG9zaXRpb24nXVwiKTtcclxuICAgIHZhciBpbnB1dF9saW5rX3RvID0gY2Fyb3VzZWxfZmlyc3QuZmluZChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKTtcclxuICAgIHZhciBudW1iZXIgPSBjYXJvdXNlbF9maXJzdC5maW5kKFwiLmJhbm5lci1pZFwiKTtcclxuICAgIHZhciBjYXJvdXNlbF9pZCA9IGNhcm91c2VsX2ZpcnN0LmF0dHIoXCJkYXRhLWNhcm91c2VsLWlkXCIpO1xyXG4gICAgdmFyIHVybCA9ICcnO1xyXG4gICAgaWYgKGNhcm91c2VsX2lkKSB7XHJcbiAgICAgICAgdXJsID0gXCIvY21zL2VkaXRvcl9jYXJvdXNlbC9cIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9jYXJvdXNlbC8nXHJcbiAgICB9XHJcbiAgICBzYXZlX2J0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGlucHV0X2ltYWdlLmF0dHIoXCJzcmNcIik7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gaW5wdXRfcG9zaXRpb24udmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBpbnB1dF9saW5rX3RvLnZhbCgpO1xyXG4gICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiBwb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICdpbWFnZV91cmwnOiBpbWFnZV91cmwsXHJcbiAgICAgICAgICAgICAgICAnbGlua190byc6IGxpbmtfdG8sXHJcbiAgICAgICAgICAgICAgICAncGsnOiBjYXJvdXNlbF9pZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2Fyb3VzZWxfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77kv67mlLnmiJDlip/vvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcmVzdWx0W1wiZGF0YVwiXVtcImlkXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbF9maXJzdC5hdHRyKFwiZGF0YS1jYXJvdXNlbC1pZFwiLCBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi6L2u5pKt5Zu+5paw5aKe5oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyLnRleHQoXCLmkYbmlL7kvY3nva5cIiArIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQ2Fyb3VzZWxfbWFwLnByb3RvdHlwZS5jbG9zZV9jYXJvdXNlbCA9IGZ1bmN0aW9uIChjYXJvdXNlbF9maXJzdCkge1xyXG4gICAgdmFyIGNsb3NlX2J0biA9IGNhcm91c2VsX2ZpcnN0LmZpbmQoXCIuY2xvc2UtY2Fyb3VzZWwtYnRuXCIpO1xyXG4gICAgY2xvc2VfYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2Fyb3VzZWxfaWQgPSBjYXJvdXNlbF9maXJzdC5hdHRyKFwiZGF0YS1jYXJvdXNlbC1pZFwiKTtcclxuICAgICAgICBpZiAoY2Fyb3VzZWxfaWQpIHtcclxuICAgICAgICAgICAgbXlhbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiBcIuaCqOehruWumuimgeWIoOmZpOi/meS4qui9ruaSreWbvuWQl++8n1wiLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuehruiupOWIoOmZpO+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9kZWxldGVfY2Fyb3VzZWwvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7J2Nhcm91c2VsX2lkJzogY2Fyb3VzZWxfaWR9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbF9maXJzdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuWIoOmZpOaIkOWKn++8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYXJvdXNlbF9maXJzdC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQ2Fyb3VzZWxfbWFwLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3Rlbl9hZGRfY2Fyb3VzZWwoKTtcclxuICAgIHRoaXMubGlzdF9jYXJvdXNlbCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY2Fyb3VzZWxfbWFwID0gbmV3IENhcm91c2VsX21hcCgpO1xyXG4gICAgY2Fyb3VzZWxfbWFwLnJ1bigpXHJcbn0pOyJdfQ==
