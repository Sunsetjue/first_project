function WriteNews(){this.upload_img=$("#upload-img")}console.log("write_news"),WriteNews.prototype.run=function(){var e=this;e.listen_qiniu_upload(),e.initUEditor(),e.listen_submit_news()},WriteNews.prototype.listen_submit_news=function(){$("#submit_news").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),i=$("input[name='title']").val(),n=$("select[name='category']").val(),o=$("input[name='describe']").val(),a=$("input[name='thumbnail']").val(),r=window.ue.getContent(),s="";s=t?"/cms/edit_news_list/":"/cms/write_news/",myajax.post({url:s,data:{title:i,category:n,describe:o,thumbnail:a,content:r,pk:t},success:function(e){200===e.code&&myalert.alertSuccess("上传新闻成功！",function(){window.location.reload()})}})})},WriteNews.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{serverUrl:"/ueditor/upload/",initialFrameHeight:400,initialFrameWidth:"100%"})},WriteNews.prototype.listen_img_btn=function(){var i=this;i.upload_img.change(function(){var e=i.upload_img[0].files[0],t=new FormData;t.append("file",e),myajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){console.log(e.data);var t=$("#thumbnail-form"),i=e.data.url;t.val(i)}}})})},WriteNews.prototype.listen_qiniu_upload=function(){var r=this;r.upload_img.change(function(){var a=this.files[0];myajax.post({url:"/cms/qiniu_token/",success:function(e){if(200===e.code){var t=e.data.token,i=(new Date).getTime()+"."+a.name.split(".")[1],n={useCdnDomain:!0,retryCount:5,region:qiniu.region.z2},o={fname:i,parames:{},mineType:["image/png","image/jpeg","image/gif"]};qiniu.upload(a,i,t,o,n).subscribe({next:r.next_fun,error:r.error_fun,complete:r.complete_fun})}}})})},WriteNews.prototype.next_fun=function(e){var t=e.total,i=t.percent,n=t.loaded,o=i.toFixed(2)+"%";$("#process-upload").show();var a=$(".progress-bar");a.css({width:o}),a.text(o),console.log(n)},WriteNews.prototype.error_fun=function(e){window.messageBox.showError(e),console.log(e.message)},WriteNews.prototype.complete_fun=function(e){console.log(e);var t=$("#thumbnail-form"),i=$("#process-upload"),n=$(".progress-bar");i.hide(),n.css("width","0"),n.text("0%"),t.val("http://pmc6nd88y.bkt.clouddn.com/"+e.key)},$(function(){(new WriteNews).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiV3JpdGVOZXdzIiwidGhpcyIsInVwbG9hZF9pbWciLCIkIiwiY29uc29sZSIsImxvZyIsInByb3RvdHlwZSIsInJ1biIsInNlbGYiLCJsaXN0ZW5fcWluaXVfdXBsb2FkIiwiaW5pdFVFZGl0b3IiLCJsaXN0ZW5fc3VibWl0X25ld3MiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJuZXdzX2lkIiwiYXR0ciIsInRpdGxlIiwidmFsIiwiY2F0ZWdvcnkiLCJkZXNjcmliZSIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJ3aW5kb3ciLCJ1ZSIsImdldENvbnRlbnQiLCJ1cmwiLCJteWFqYXgiLCJwb3N0IiwiZGF0YSIsInBrIiwic3VjY2VzcyIsInJlc3VsdCIsIm15YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsIlVFIiwiZ2V0RWRpdG9yIiwic2VydmVyVXJsIiwiaW5pdGlhbEZyYW1lSGVpZ2h0IiwiaW5pdGlhbEZyYW1lV2lkdGgiLCJsaXN0ZW5faW1nX2J0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1fZGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInRodW1ibmFpbF9mb3JtIiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtZXMiLCJtaW5lVHlwZSIsInVwbG9hZCIsInN1YnNjcmliZSIsIm5leHQiLCJuZXh0X2Z1biIsImVycm9yIiwiZXJyb3JfZnVuIiwiY29tcGxldGUiLCJjb21wbGV0ZV9mdW4iLCJyZXNwb25zZSIsInRvdGFsIiwicGVyY2VudCIsImxvYWRlZCIsImN1cnJlbnRUZXh0IiwidG9GaXhlZCIsInNob3ciLCJwcm9jZXNzX2JhciIsImNzcyIsIndpZHRoIiwidGV4dCIsIm1lc3NhZ2VCb3giLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwicHJvY2Vzc191cGxvYWQiLCJoaWRlIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxZQUNMQyxLQUFLQyxXQUFhQyxFQUFFLGVBSHhCQyxRQUFRQyxJQUFJLGNBTVpMLFVBQVVNLFVBQVVDLElBQU0sV0FDdEIsSUFBSUMsRUFBT1AsS0FDWE8sRUFBS0Msc0JBRUxELEVBQUtFLGNBQ0xGLEVBQUtHLHNCQUdUWCxVQUFVTSxVQUFVSyxtQkFBcUIsV0FDbkJSLEVBQUUsZ0JBQ1JTLE1BQU0sU0FBVUMsR0FDeEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1aLEVBQUVGLE1BQ01lLEtBQUssZ0JBRW5CQyxFQUFRZCxFQUFFLHVCQUF1QmUsTUFDakNDLEVBQVdoQixFQUFFLDJCQUEyQmUsTUFDeENFLEVBQVdqQixFQUFFLDBCQUEwQmUsTUFDdkNHLEVBQVlsQixFQUFFLDJCQUEyQmUsTUFDekNJLEVBQVVDLE9BQU9DLEdBQUdDLGFBRXBCQyxFQUFNLEdBRU5BLEVBREFYLEVBQ00sdUJBRUEsbUJBR1ZZLE9BQU9DLEtBQUssQ0FDUkYsSUFBT0EsRUFDUEcsS0FBUSxDQUNKWixNQUFTQSxFQUNURSxTQUFZQSxFQUNaQyxTQUFZQSxFQUNaQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYUSxHQUFNZixHQUVWZ0IsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2JDLFFBQVFDLGFBQWEsVUFBVSxXQUMzQlgsT0FBT1ksU0FBU0MsaUJBUXhDcEMsVUFBVU0sVUFBVUksWUFBYyxXQUM5QmEsT0FBT0MsR0FBS2EsR0FBR0MsVUFBVSxTQUFTLENBQzlCQyxVQUFhLG1CQUNiQyxtQkFBc0IsSUFDdEJDLGtCQUFxQixVQU03QnpDLFVBQVVNLFVBQVVvQyxlQUFpQixXQUNqQyxJQUFJbEMsRUFBT1AsS0FDWE8sRUFBS04sV0FBV3lDLE9BQU8sV0FFbkIsSUFBSUMsRUFBT3BDLEVBQUtOLFdBQVcsR0FBRzJDLE1BQU0sR0FDaENDLEVBQVksSUFBSUMsU0FDcEJELEVBQVVFLE9BQU8sT0FBUUosR0FDekJqQixPQUFPQyxLQUFLLENBQ1JGLElBQU8sb0JBQ1BHLEtBQVFpQixFQUNSRyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZm5CLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QjVCLFFBQVFDLElBQUkyQixFQUFhLE1BQ3pCLElBQUltQixFQUFpQmhELEVBQUUsbUJBQ25CdUIsRUFBTU0sRUFBYSxLQUFPLElBQzlCbUIsRUFBZWpDLElBQUlRLFVBT3ZDMUIsVUFBVU0sVUFBVUcsb0JBQXNCLFdBQ3RDLElBQUlELEVBQU9QLEtBQ1hPLEVBQUtOLFdBQVd5QyxPQUFPLFdBQ25CLElBQUlDLEVBQU8zQyxLQUFLNEMsTUFBTSxHQUN0QmxCLE9BQU9DLEtBQUssQ0FDUkYsSUFBTyxvQkFDUEssUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlvQixFQUFRcEIsRUFBYSxLQUFTLE1BQzlCcUIsR0FBTSxJQUFLQyxNQUFRQyxVQUFZLElBQU1YLEVBQUtZLEtBQUtDLE1BQU0sS0FBSyxHQUMxREMsRUFBUyxDQUNUQyxjQUFjLEVBQ2RDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFckJDLEVBQVcsQ0FDWEMsTUFBT1osRUFDUGEsUUFBUyxHQUNUQyxTQUFVLENBQUMsWUFBYSxhQUFjLGNBRXpCTCxNQUFNTSxPQUFPeEIsRUFBTVMsRUFBS0QsRUFBT1ksRUFBVU4sR0FDL0NXLFVBQVUsQ0FDakJDLEtBQVE5RCxFQUFLK0QsU0FDYkMsTUFBU2hFLEVBQUtpRSxVQUNkQyxTQUFZbEUsRUFBS21FLHNCQVF6QzNFLFVBQVVNLFVBQVVpRSxTQUFXLFNBQVVLLEdBQ3JDLElBQUlDLEVBQVFELEVBQVNDLE1BQ2pCQyxFQUFVRCxFQUFNQyxRQUNoQkMsRUFBU0YsRUFBTUUsT0FDZkMsRUFBY0YsRUFBUUcsUUFBUSxHQUFLLElBRWxCOUUsRUFBRSxtQkFDUitFLE9BQ2YsSUFBSUMsRUFBY2hGLEVBQUUsaUJBQ3BCZ0YsRUFBWUMsSUFBSSxDQUFDQyxNQUFTTCxJQUMxQkcsRUFBWUcsS0FBS04sR0FDakI1RSxRQUFRQyxJQUFJMEUsSUFHaEIvRSxVQUFVTSxVQUFVbUUsVUFBWSxTQUFVRCxHQUN0Q2pELE9BQU9nRSxXQUFXQyxVQUFVaEIsR0FDNUJwRSxRQUFRQyxJQUFJbUUsRUFBTWlCLFVBR3RCekYsVUFBVU0sVUFBVXFFLGFBQWUsU0FBVUMsR0FDekN4RSxRQUFRQyxJQUFJdUUsR0FDWixJQUFJekIsRUFBaUJoRCxFQUFFLG1CQUNuQnVGLEVBQWlCdkYsRUFBRSxtQkFDbkJnRixFQUFjaEYsRUFBRSxpQkFFcEJ1RixFQUFlQyxPQUNmUixFQUFZQyxJQUFJLFFBQVMsS0FDekJELEVBQVlHLEtBQUssTUFDakJuQyxFQUFlakMsSUFKTCxvQ0FJZTBELEVBQVN2QixNQUl0Q2xELEVBQUUsWUFDUyxJQUFJSCxXQUNWTyIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKFwid3JpdGVfbmV3c1wiKTtcclxuXHJcbmZ1bmN0aW9uIFdyaXRlTmV3cygpIHtcclxuICAgIHRoaXMudXBsb2FkX2ltZyA9ICQoXCIjdXBsb2FkLWltZ1wiKTsgLy8g5b6X5Yiw55qE5piv5LiA5Liq6ZuG5ZCIIOaJgOacieWMheaLrOi/meS4qmlk55qE6ZuG5ZCIXHJcbn1cclxuXHJcbldyaXRlTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5fcWluaXVfdXBsb2FkKCk7XHJcbiAgICAvL3NlbGYubGlzdGVuX2ltZ19idG4oKTtcclxuICAgIHNlbGYuaW5pdFVFZGl0b3IoKTtcclxuICAgIHNlbGYubGlzdGVuX3N1Ym1pdF9uZXdzKClcclxufTtcclxuXHJcbldyaXRlTmV3cy5wcm90b3R5cGUubGlzdGVuX3N1Ym1pdF9uZXdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdF9uZXdzID0gJChcIiNzdWJtaXRfbmV3c1wiKTtcclxuICAgIHN1Ym1pdF9uZXdzLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIG5ld3NfaWQgPSBidG4uYXR0cihcImRhdGEtbmV3cy1pZFwiKTtcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjcmliZSA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjcmliZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgaWYgKG5ld3NfaWQpIHtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9uZXdzX2xpc3QvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL3dyaXRlX25ld3MvJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbXlhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAnZGVzY3JpYmUnOiBkZXNjcmliZSxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAncGsnOiBuZXdzX2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG15YWxlcnQuYWxlcnRTdWNjZXNzKCfkuIrkvKDmlrDpl7vmiJDlip/vvIEnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuV3JpdGVOZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XHJcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJyxcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdpbml0aWFsRnJhbWVXaWR0aCc6ICcxMDAlJ1xyXG4gICAgICAgIC8vICdpbml0aWFsQ29udGVudCc6IFwi6K+36L6T5YWl5paw6Ze75YaF5a65XCIsXHJcbiAgICAgICAgLy8gJ2F1dG9DbGVhcmluaXRpYWxDb250ZW50JzogZmFsc2VcclxuICAgIH0pXHJcbn07XHJcblxyXG5Xcml0ZU5ld3MucHJvdG90eXBlLmxpc3Rlbl9pbWdfYnRuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi51cGxvYWRfaW1nLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIOeUqOS6juS4iuS8oOWbvueJh1xyXG4gICAgICAgIHZhciBmaWxlID0gc2VsZi51cGxvYWRfaW1nWzBdLmZpbGVzWzBdOyAvLyDlvpfliLDpm4blkIjph4zpnaLnmoTnrKzkuIDkuKrlhYPntKAg6L+Z5Liq5YWD57Sg6YeM6Z2i5Y+v5Lul5a2Y5YKo5aSa5YWD57SgIOW+l+WIsOmHjOmdoueahOesrOS4gOS4qlxyXG4gICAgICAgIHZhciBmb3JtX2RhdGEgPSBuZXcgRm9ybURhdGEoKTsgLy8g5byC5q2l5LiK5Lyg5paH5Lu2XHJcbiAgICAgICAgZm9ybV9kYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOyAvLyDmt7vliqDliLBmaWxl6YeM6Z2i5Y67XHJcbiAgICAgICAgbXlhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtX2RhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLCAvLyDlkYror4lqUXVlcnnov5nkuKrmlofku7bkuI3pnIDopoFqUXVlcnnlho3ljrvlpITnkIbvvIzov5nkuI3mmK/kuIDkuKrmma7pgJrnmoTmlofmnKzlrZfnrKbkuLJcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsIC8vIOS9v+eUqOm7mOiupOeahOW9ouW8j+S4jemcgOimgeWGjea3u+WKoOS6hlxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbXCJkYXRhXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsX2Zvcm0gPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbXCJkYXRhXCJdW1widXJsXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbF9mb3JtLnZhbCh1cmwpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbn07XHJcblxyXG5Xcml0ZU5ld3MucHJvdG90eXBlLmxpc3Rlbl9xaW5pdV91cGxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnVwbG9hZF9pbWcuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgbXlhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvcWluaXVfdG9rZW4vJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0W1wiZGF0YVwiXVtcInRva2VuXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KFwiLlwiKVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnoyXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5lVHlwZTogW1wiaW1hZ2UvcG5nXCIsIFwiaW1hZ2UvanBlZ1wiLCBcImltYWdlL2dpZlwiLF0gLy8gXCJ2aWRlby9tcDRcIl0gLy9cInZpZGVvL3gtbXMtd212XCIsXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSwga2V5LCB0b2tlbiwgcHV0RXh0cmEsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6IHNlbGYubmV4dF9mdW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYuZXJyb3JfZnVuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBzZWxmLmNvbXBsZXRlX2Z1blxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbldyaXRlTmV3cy5wcm90b3R5cGUubmV4dF9mdW4gPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsO1xyXG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xyXG4gICAgdmFyIGxvYWRlZCA9IHRvdGFsLmxvYWRlZDtcclxuICAgIHZhciBjdXJyZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgyKSArIFwiJVwiO1xyXG4gICAgLy8gY29uc29sZS5sb2cocGVyY2VudCk7XHJcbiAgICB2YXIgcHJvY2Vzc191cGxvYWQgPSAkKFwiI3Byb2Nlc3MtdXBsb2FkXCIpO1xyXG4gICAgcHJvY2Vzc191cGxvYWQuc2hvdygpO1xyXG4gICAgdmFyIHByb2Nlc3NfYmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICBwcm9jZXNzX2Jhci5jc3Moe1wid2lkdGhcIjogY3VycmVudFRleHR9KTtcclxuICAgIHByb2Nlc3NfYmFyLnRleHQoY3VycmVudFRleHQpO1xyXG4gICAgY29uc29sZS5sb2cobG9hZGVkKVxyXG59O1xyXG5cclxuV3JpdGVOZXdzLnByb3RvdHlwZS5lcnJvcl9mdW4gPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihlcnJvcik7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKVxyXG59O1xyXG5cclxuV3JpdGVOZXdzLnByb3RvdHlwZS5jb21wbGV0ZV9mdW4gPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgIHZhciB0aHVtYm5haWxfZm9ybSA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XHJcbiAgICB2YXIgcHJvY2Vzc191cGxvYWQgPSAkKFwiI3Byb2Nlc3MtdXBsb2FkXCIpO1xyXG4gICAgdmFyIHByb2Nlc3NfYmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICB2YXIgdXJsID0gXCJodHRwOi8vcG1jNm5kODh5LmJrdC5jbG91ZGRuLmNvbS9cIjtcclxuICAgIHByb2Nlc3NfdXBsb2FkLmhpZGUoKTtcclxuICAgIHByb2Nlc3NfYmFyLmNzcyhcIndpZHRoXCIsIFwiMFwiKTtcclxuICAgIHByb2Nlc3NfYmFyLnRleHQoXCIwJVwiKTtcclxuICAgIHRodW1ibmFpbF9mb3JtLnZhbCh1cmwgKyByZXNwb25zZS5rZXkpXHJcblxyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgIHZhciB3ID0gbmV3IFdyaXRlTmV3cygpO1xyXG4gICB3LnJ1bigpO1xyXG59KTsiXX0=
